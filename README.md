# –ë–æ—Ç –¥–ª—è —É—á—ë—Ç–∞ –∞—Ä–µ–Ω–¥—ã –∏ –∫–æ–º–º—É–Ω–∞–ª—å–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π

Telegram-–±–æ—Ç –¥–ª—è –∞—Ä–µ–Ω–¥–æ–¥–∞—Ç–µ–ª–µ–π –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üìã –£—á—ë—Ç –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–æ–≤ –∏ –ø—Ä–æ–∂–∏–≤–∞–Ω–∏–π –ø–æ –∫–≤–∞—Ä—Ç–∏—Ä–∞–º
- üí∞ –£—á—ë—Ç –∞—Ä–µ–Ω–¥—ã –∏ –∫–æ–º–º—É–Ω–∞–ª—å–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π
- üì∏ –ü—Ä–∏—ë–º —á–µ–∫–æ–≤ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–æ–π
- üì® –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞–º –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º
- üí¨ –î–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—è—è –ø–µ—Ä–µ–ø–∏—Å–∫–∞ –ê—Ä–µ–Ω–¥–∞—Ç–æ—Ä ‚Üî –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- Python 3.11+
- aiogram 3.x (Telegram Bot Framework)
- PostgreSQL (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)
- SQLAlchemy 2.x (async ORM)
- Alembic (–º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î)

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.example` –≤ `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ:

```bash
cp .env.example .env
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env`:
- `BOT_TOKEN` - —Ç–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –æ—Ç @BotFather
- `DB_*` - –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL
- `ADMIN_IDS` - —Å–ø–∏—Å–æ–∫ Telegram ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)

### 3. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
alembic upgrade head
```

### 4. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

```bash
python bot/main.py
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
bot/
‚îú‚îÄ‚îÄ config.py           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è)
‚îú‚îÄ‚îÄ main.py             # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ cron.py             # –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ (–Ω–∞—á–∏—Å–ª–µ–Ω–∏—è)
‚îú‚îÄ‚îÄ states.py           # FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è
‚îú‚îÄ‚îÄ database/           # –ú–æ–¥–µ–ª–∏ –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ core.py         # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
‚îÇ   ‚îî‚îÄ‚îÄ models.py       # SQLAlchemy –º–æ–¥–µ–ª–∏
‚îú‚îÄ‚îÄ handlers/           # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ Telegram
‚îÇ   ‚îú‚îÄ‚îÄ common.py       # –û–±—â–∏–µ –∫–æ–º–∞–Ω–¥—ã
‚îÇ   ‚îú‚îÄ‚îÄ admin.py        # –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
‚îÇ   ‚îú‚îÄ‚îÄ tenant.py       # –ê—Ä–µ–Ω–¥–∞—Ç–æ—Ä—ã
‚îÇ   ‚îî‚îÄ‚îÄ support.py      # –ü–µ—Ä–µ–ø–∏—Å–∫–∞
‚îú‚îÄ‚îÄ middlewares/        # Middleware
‚îÇ   ‚îî‚îÄ‚îÄ consent.py      # –°–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –ü–î
‚îî‚îÄ‚îÄ services/           # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
    ‚îú‚îÄ‚îÄ tenant_service.py
    ‚îú‚îÄ‚îÄ stay_service.py
    ‚îú‚îÄ‚îÄ billing_service.py
    ‚îú‚îÄ‚îÄ notification_service.py
    ‚îî‚îÄ‚îÄ support_service.py

migrations/             # –ú–∏–≥—Ä–∞—Ü–∏–∏ Alembic
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –î–ª—è –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–æ–≤

1. –ù–∞—á–Ω–∏—Ç–µ –¥–∏–∞–ª–æ–≥ —Å –±–æ—Ç–æ–º `/start`
2. –ü—Ä–∏–º–∏—Ç–µ —Å–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
3. –û—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ —Ñ–æ—Ç–æ —á–µ–∫–æ–≤ –¥–ª—è –æ–ø–ª–∞—Ç—ã
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `/message` –¥–ª—è —Å–≤—è–∑–∏ —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

1. `/admin` - –æ—Ç–∫—Ä—ã—Ç—å –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
2. –î–æ–±–∞–≤–∏—Ç—å –æ–±—ä–µ–∫—Ç—ã (–∫–≤–∞—Ä—Ç–∏—Ä—ã)
3. –ó–∞—Å–µ–ª–∏—Ç—å –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–æ–≤
4. –ü—Ä–æ–≤–µ—Ä—è—Ç—å –ø–æ—Å—Ç—É–ø–∏–≤—à–∏–µ –ø–ª–∞—Ç–µ–∂–∏
5. –û—Ç–≤–µ—á–∞—Ç—å –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ `/reply <stay_id> <—Ç–µ–∫—Å—Ç>`

## Docker

```bash
docker build -t rent_bot .
docker run --env-file .env rent_bot
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
