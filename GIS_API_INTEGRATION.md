# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ì–ò–° –ñ–ö–• —á–µ—Ä–µ–∑ API

## –û–±–∑–æ—Ä

–ì–ò–° –ñ–ö–• –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç **–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π API** –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ –¥–æ–º–∞—Ö, –£–ö, –†–°–û, –ø–ª–∞—Ç–µ–∂–∞—Ö –∏ –ª–∏—Ü–µ–≤—ã—Ö —Å—á–µ—Ç–∞—Ö.

---

## üîê –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è –¥–æ—Å—Ç—É–ø–∞

1. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ dom.gosuslugi.ru** –∫–∞–∫ —É—á–∞—Å—Ç–Ω–∏–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –æ–±–º–µ–Ω–∞:
   - –£–ø—Ä–∞–≤–ª—è—é—â–∞—è –∫–æ–º–ø–∞–Ω–∏—è (–£–ö)
   - –¢–°–ñ/–ñ–°–ö
   - –†–µ—Å—É—Ä—Å–æ—Å–Ω–∞–±–∂–∞—é—â–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è (–†–°–û)
   - –û—Ä–≥–∞–Ω—ã –≤–ª–∞—Å—Ç–∏

2. **–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –≠–ü** –∏–ª–∏ API-—Ç–æ–∫–µ–Ω–∞

3. **–ü–æ–¥–ø–∏—Å–∞–Ω–∏–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è** –æ–± –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏

---

## üì° API –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏

### **–í–µ—Ä—Å–∏—è:** 11-14 (—Ç–µ–∫—É—â–∞—è - 14)
### **–ü—Ä–æ—Ç–æ–∫–æ–ª:** SOAP 1.2 / REST
### **–§–æ—Ä–º–∞—Ç:** XML
### **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** 
- https://open-gkh.ru - WSDL —Å—Ö–µ–º—ã –∏ –ø—Ä–∏–º–µ—Ä—ã
- https://gisgkx.ru - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

---

## üîç –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã API

### 1. **–ü–æ–∏—Å–∫ –¥–æ–º–∞ –ø–æ –∞–¥—Ä–µ—Å—É**
```xml
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" 
                  xmlns:hcs="http://dom.gosuslugi.ru/hcs-services/organizations/">
   <soapenv:Header/>
   <soapenv:Body>
      <hcs:getHouseByAddress>
         <hcs:FIASHouseGuid>abc-123-def</hcs:FIASHouseGuid>
      </hcs:getHouseByAddress>
   </soapenv:Body>
</soapenv:Envelope>
```

**–û—Ç–≤–µ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç:**
- ID –¥–æ–º–∞ –≤ –ì–ò–° –ñ–ö–•
- –ê–¥—Ä–µ—Å
- –£–ø—Ä–∞–≤–ª—è—é—â–∞—è –∫–æ–º–ø–∞–Ω–∏—è
- **–°–ø–∏—Å–æ–∫ –†–°–û —Å –¥–æ–≥–æ–≤–æ—Ä–∞–º–∏**
- –ü–ª–æ—â–∞–¥—å, —ç—Ç–∞–∂–Ω–æ—Å—Ç—å, –≥–æ–¥ –ø–æ—Å—Ç—Ä–æ–π–∫–∏

---

### 2. **–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ–≥–æ–≤–æ—Ä–æ–≤ —Ä–µ—Å—É—Ä—Å–æ—Å–Ω–∞–±–∂–µ–Ω–∏—è**
```xml
<hcs:exportSupplyResourceContract>
   <hcs:HouseGuid>house-uuid</hcs:HouseGuid>
</hcs:exportSupplyResourceContract>
```

**–û—Ç–≤–µ—Ç –≤–∫–ª—é—á–∞–µ—Ç:**
- –ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –†–°–û
- –ò–ù–ù –†–°–û
- –¢–∏–ø —Ä–µ—Å—É—Ä—Å–∞ (—ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ, –≤–æ–¥–∞, –≥–∞–∑, —Ç–µ–ø–ª–æ)
- –ù–æ–º–µ—Ä –¥–æ–≥–æ–≤–æ—Ä–∞
- –î–∞—Ç—ã –¥–µ–π—Å—Ç–≤–∏—è

---

### 3. **–≠–∫—Å–ø–æ—Ä—Ç –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤**
```xml
<hcs:exportPaymentDocumentDetailsRequest>
   <hcs:AccountGuid>account-uuid</hcs:AccountGuid>
   <hcs:PeriodMonth>01</hcs:PeriodMonth>
   <hcs:PeriodYear>2026</hcs:PeriodYear>
</hcs:exportPaymentDocumentDetailsRequest>
```

---

## üõ† –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è HouseBot

### **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**

```
HouseBot
  ‚Üì
dadata.ru (–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∞–¥—Ä–µ—Å–∞ ‚Üí FIAS ID)
  ‚Üì
–ì–ò–° –ñ–ö–• API (FIAS ID ‚Üí –¥–æ–º ‚Üí –†–°–û)
  ‚Üì
–ë–∞–∑–∞ –±–æ—Ç–∞ (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –†–°–û –¥–ª—è –æ–±—ä–µ–∫—Ç–∞)
```

### **–®–∞–≥–∏ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:**

#### 1. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ –ì–ò–° –ñ–ö–•**
   - –ü–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É –∫–∞–∫ "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞"
   - –ü–æ–ª—É—á–∏—Ç—å test-–¥–æ—Å—Ç—É–ø (sandbox)
   - –ü—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
   - –ü–æ–ª—É—á–∏—Ç—å production-–¥–æ—Å—Ç—É–ø

#### 2. **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è**
   
Python –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è SOAP:
```bash
pip install zeep  # SOAP client
```

–ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞:
```python
from zeep import Client
from zeep.wsse.signature import Signature

# WSDL endpoint
wsdl = "https://dom.gosuslugi.ru/hcs-services/organizations/houseManagement?wsdl"

# Create client with certificate
client = Client(wsdl)

# Search house
response = client.service.getHouseByAddress(
    FIASHouseGuid="your-fias-id-from-dadata"
)

# Extract RSO
for contract in response['SupplyResourceContracts']:
    rso_name = contract['SupplierName']
    rso_inn = contract['SupplierINN']
    service_type = contract['ResourceType']
    print(f"{service_type}: {rso_name} (–ò–ù–ù: {rso_inn})")
```

#### 3. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –±–æ—Ç–∞**

–î–æ–±–∞–≤–∏—Ç—å –≤ `bot/services/gis_api_service.py`:
```python
async def get_rso_for_house(fias_id: str) -> List[Dict]:
    """
    Get RSO providers from GIS –ñ–ö–• by FIAS house ID.
    Requires GIS –ñ–ö–• API credentials.
    """
    # SOAP request implementation
    pass
```

---

## üí∞ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –ü—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–∏—Å—ã

–ï—Å–ª–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ –ì–ò–° –ñ–ö–• —Å–ª–∏—à–∫–æ–º —Å–ª–æ–∂–Ω–∞, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ–∫—Å–∏:

### **1. –†–æ—Å–ö–≤–∞—Ä—Ç–∞–ª API** (roskvartal.ru)
- REST JSON API
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –≠–ü
- –ü–ª–∞—Ç–Ω—ã–π (–æ—Ç 5,000‚ÇΩ/–º–µ—Å)
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: https://api.roskvartal.ru/docs

–ü—Ä–∏–º–µ—Ä:
```python
import aiohttp

async def get_house_info(address: str):
    url = "https://api.roskvartal.ru/v1/houses/search"
    headers = {"Authorization": "Bearer YOUR_TOKEN"}
    params = {"address": address}
    
    async with aiohttp.ClientSession() as session:
        async with session.get(url, headers=headers, params=params) as resp:
            data = await resp.json()
            return data['rso_list']
```

### **2. –†–ò–ê–° API** (rias-gkh.ru)
- –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –†–æ—Å–ö–≤–∞—Ä—Ç–∞–ª
- XML/JSON
- –¶–µ–Ω–∞ –ø–æ –∑–∞–ø—Ä–æ—Å—É

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

### **–≠—Ç–∞–ø 1: MVP (–°–µ–π—á–∞—Å)**
- ‚úÖ **DaData** –¥–ª—è –∞–¥—Ä–µ—Å–æ–≤ –∏ –£–ö
- ‚úÖ **–†—É—á–Ω–æ–π –≤–≤–æ–¥ –†–°–û** —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É
- –ë—ã—Å—Ç—Ä–æ, –±–µ—Å–ø–ª–∞—Ç–Ω–æ, —Ä–∞–±–æ—Ç–∞–µ—Ç

### **–≠—Ç–∞–ø 2: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è (–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞)**
–í—ã–±—Ä–∞—Ç—å –æ–¥–∏–Ω –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤:

**–í–∞—Ä–∏–∞–Ω—Ç A (–î–µ—à–µ–≤–æ, —Å–ª–æ–∂–Ω–æ):**
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ –ì–ò–° –ñ–ö–•
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è SOAP API
- –ë–µ—Å–ø–ª–∞—Ç–Ω–æ, –Ω–æ –¥–æ–ª–≥–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è

**–í–∞—Ä–∏–∞–Ω—Ç B (–ë—ã—Å—Ç—Ä–æ, –ø–ª–∞—Ç–Ω–æ):**
- –ü–æ–¥–∫–ª—é—á–∏—Ç—å –†–æ—Å–ö–≤–∞—Ä—Ç–∞–ª/–†–ò–ê–° API
- REST JSON, –ø—Ä–æ—Å—Ç–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ~5,000‚ÇΩ/–º–µ—Å

**–í–∞—Ä–∏–∞–Ω—Ç C (–ü–∞—Ä—Å–∏–Ω–≥):**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å reformagkh.ru –ø–∞—Ä—Å–µ—Ä
- –ë–µ—Å–ø–ª–∞—Ç–Ω–æ, –Ω–æ –Ω–µ–Ω–∞–¥–µ–∂–Ω–æ

---

## üìã Checklist –¥–ª—è —Å—Ç–∞—Ä—Ç–∞

### –ï—Å–ª–∏ —Ä–µ—à–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π API:
- [ ] –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ dom.gosuslugi.ru
- [ ] –ü–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ API –¥–æ—Å—Ç—É–ø
- [ ] –ü–æ–ª—É—á–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –¥–æ—Å—Ç—É–ø
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `zeep` –±–∏–±–ª–∏–æ—Ç–µ–∫—É
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `gis_api_service.py`
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –∞–¥—Ä–µ—Å–∞—Ö
- [ ] –ü—Ä–æ–π—Ç–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
- [ ] –ü–æ–ª—É—á–∏—Ç—å production –¥–æ—Å—Ç—É–ø

### –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø—Ä–æ–∫—Å–∏:
- [ ] –í—ã–±—Ä–∞—Ç—å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (–†–æ—Å–ö–≤–∞—Ä—Ç–∞–ª / –†–ò–ê–°)
- [ ] –û—Ñ–æ—Ä–º–∏—Ç—å –¥–æ–≥–æ–≤–æ—Ä
- [ ] –ü–æ–ª—É—á–∏—Ç—å API –∫–ª—é—á
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é

### –î–ª—è MVP (—Ç–µ–∫—É—â–∏–π –≤–∞—Ä–∏–∞–Ω—Ç):
- [x] DaData –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] –ü–æ–ª—É—á–∏—Ç—å DADATA_API_KEY
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤ `.env`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–¥–º–∏–Ω-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –†–°–û

---

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- **–ì–ò–° –ñ–ö–• Portal:** https://dom.gosuslugi.ru
- **API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** https://open-gkh.ru
- **WSDL Schemas:** https://dom.gosuslugi.ru/hcs-services/
- **–†–æ—Å–ö–≤–∞—Ä—Ç–∞–ª API:** https://roskvartal.ru/api
- **–†–ò–ê–°:** https://rias-gkh.ru
- **DaData:** https://dadata.ru

---

## ‚ùì FAQ

**Q: –ú–æ–∂–Ω–æ –ª–∏ –ø–æ–ª—É—á–∏—Ç—å –†–°–û –±–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤ –ì–ò–° –ñ–ö–•?**  
A: –î–∞, —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–∏—Å—ã (–ø–ª–∞—Ç–Ω–æ) –∏–ª–∏ DaData + —Ä—É—á–Ω–æ–π –≤–≤–æ–¥ (–±–µ—Å–ø–ª–∞—Ç–Ω–æ).

**Q: –°–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–Ω–∏–º–∞–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ –ì–ò–° –ñ–ö–•?**  
A: –û—Ç 2 –Ω–µ–¥–µ–ª—å –¥–æ 2 –º–µ—Å—è—Ü–µ–≤ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–µ–≥–∏–æ–Ω–∞ –∏ —Ç–∏–ø–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏).

**Q: –ù—É–∂–µ–Ω –ª–∏ —é—Ä–ª–∏—Ü–æ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ API?**  
A: –î–∞, —Ñ–∏–∑–ª–∏—Ü–∞–º –¥–æ—Å—Ç—É–ø –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è. –ù—É–∂–Ω–∞ –£–ö, –¢–°–ñ –∏–ª–∏ —Å—Ç–∞—Ç—É—Å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –ò–°.

**Q: –ß—Ç–æ –¥–µ—à–µ–≤–ª–µ: –ø—Ä–æ–∫—Å–∏ –∏–ª–∏ —Å–≤–æ—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è?**  
A: –ü—Ä–æ–∫—Å–∏ —É–¥–æ–±–Ω–µ–µ –¥–ª—è –º–∞–ª—ã—Ö –æ–±—ä–µ–º–æ–≤. –°–≤–æ—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤—ã–≥–æ–¥–Ω–µ–µ –ø—Ä–∏ >1000 –¥–æ–º–æ–≤.
