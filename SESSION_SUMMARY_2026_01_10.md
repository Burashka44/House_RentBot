# –ò—Ç–æ–≥–∏ —Ä–∞–±–æ—Ç—ã: 2026-01-10

## üéØ –ì–ª–∞–≤–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è

### 1. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Ollama –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —á–µ–∫–æ–≤** ‚úÖ
- –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ª–æ–∫–∞–ª—å–Ω–æ–π Ollama (llama3.2-vision)
- –°–µ—Ä–≤–µ—Ä: `192.168.1.220:11434`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Å—É–º–º –∏ –¥–∞—Ç –∏–∑ —á–µ–∫–æ–≤
- Fallback –Ω–∞ Tesseract OCR
- Graceful degradation –Ω–∞ —Ä—É—á–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É

### 2. **DaData –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –¥–ª—è –∞–¥—Ä–µ—Å–æ–≤** ‚úÖ
- `bot/services/dadata_service.py` - –ø–æ–ª–Ω—ã–π —Å–µ—Ä–≤–∏—Å
- –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–æ–≤
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ –§–ò–ê–°
- –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ–± –£–ö
- 10,000 –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å

### 3. **–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ì–ò–° –ñ–ö–•** üìÑ
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–º—É SOAP API
- `bot/services/gis_api_service.py` - —à–∞–±–ª–æ–Ω —Å–µ—Ä–≤–∏—Å–∞
- `GIS_API_INTEGRATION.md` - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- –¢—Ä–∏ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º –†–°–û

### 4. **–ü–∞—Ä—Å–µ—Ä ReformaGKH** üï∑Ô∏è
- `bot/services/gis_parser_service.py` - —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π
- CSS-—Å–µ–ª–µ–∫—Ç–æ—Ä—ã –ø–æ–ª—É—á–µ–Ω—ã –∏–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è
- –®–∞–±–ª–æ–Ω—ã –¥–ª—è –†–°–û –∏ –£–ö

### 5. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ÆMoney (–Ø–Ω–¥–µ–∫—Å.–î–µ–Ω—å–≥–∏)** üí≥
- `bot/services/yoomoney_service.py` - —Å–µ—Ä–≤–∏—Å –ø–ª–∞—Ç–µ–∂–µ–π
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Å—ã–ª–æ–∫ –Ω–∞ –æ–ø–ª–∞—Ç—É –ñ–ö–• –ø–æ –ª–∏—Ü–µ–≤—ã–º —Å—á–µ—Ç–∞–º
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–ª–∞—Ç–µ–∂–µ–π
- `PAYMENT_INTEGRATION.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### 6. **–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π –ë–î** üóÑÔ∏è
- –ú–∏–≥—Ä–∞—Ü–∏—è: `migrations/versions/add_payment_details_rso.py`
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è –¥–ª—è –†–°–û:
  - `inn`, `bik`, `bank_account`
  - `payment_purpose_template`
  - `yoomoney_service_id`
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è –¥–ª—è –ª–∏—Ü–µ–≤—ã—Ö —Å—á–µ—Ç–æ–≤:
  - `personal_account`
  - `contract_number`
  - `service_code`
  - `payment_data`

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞

1. **RSO_INTEGRATION_GUIDE.md** - –í—ã–±–æ—Ä –ø–æ–¥—Ö–æ–¥–∞ –∫ –ø–æ–ª—É—á–µ–Ω–∏—é –†–°–û
2. **GIS_API_INTEGRATION.md** - –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π API –ì–ò–° –ñ–ö–•
3. **PAYMENT_INTEGRATION.md** - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ÆMoney
4. **SESSION_CONTEXT.md** - –ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–π —Å–µ—Å—Å–∏–∏

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã:
```
beautifulsoup4  # –î–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ HTML
lxml           # XML –ø–∞—Ä—Å–µ—Ä
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (.env):
```bash
# Ollama
OLLAMA_HOST=http://192.168.1.220:11434
OLLAMA_MODEL=llama3.2-vision:latest

# DaData
DADATA_API_KEY=your_key_here
DADATA_SECRET_KEY=your_key_here

# YooMoney
YOOMONEY_TOKEN=your_token
YOOMONEY_CLIENT_ID=your_client_id

# GIS –ñ–ö–• (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
GIS_CERT_PATH=/path/to/cert.pem
GIS_KEY_PATH=/path/to/key.pem
GIS_API_TOKEN=your_token
```

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –ø–ª–∞—Ç–µ–∂–µ–π:

1. **–ú–∏–≥—Ä–∞—Ü–∏—è –ë–î:**
   ```bash
   alembic upgrade head
   ```

2. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ DaData:**
   - https://dadata.ru
   - –ü–æ–ª—É—á–∏—Ç—å API –∫–ª—é—á (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
   - –î–æ–±–∞–≤–∏—Ç—å –≤ `.env`

3. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ –ÆMoney:**
   - https://yoomoney.ru/myservices/
   - –°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
   - –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω

4. **–í—ã–±–æ—Ä –≤–∞—Ä–∏–∞–Ω—Ç–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π:**
   - **A) –ì–ò–° –ñ–ö–• API** (–¥–æ–ª–≥–æ, –±–µ—Å–ø–ª–∞—Ç–Ω–æ, –ø–æ–ª–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è)
   - **B) –ü—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–∏—Å—ã** (–±—ã—Å—Ç—Ä–æ, –ø–ª–∞—Ç–Ω–æ ~5,000‚ÇΩ/–º–µ—Å)
   - **C) API –†–°–û –Ω–∞–ø—Ä—è–º—É—é** (—Å—Ä–µ–¥–Ω–µ, –±–µ—Å–ø–ª–∞—Ç–Ω–æ, —á–∞—Å—Ç–∏—á–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è)

### –î–ª—è –∑–∞–ø—É—Å–∫–∞:

1. –ê–¥–º–∏–Ω-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤–≤–æ–¥–∞ –ª–∏—Ü–µ–≤—ã—Ö —Å—á–µ—Ç–æ–≤
2. –ö–Ω–æ–ø–∫–∞ "–û–ø–ª–∞—Ç–∏—Ç—å –ñ–ö–•" –≤ –º–µ–Ω—é –∂–∏–ª—å—Ü–∞
3. Webhook –æ—Ç –ÆMoney –¥–ª—è –∞–≤—Ç–æ–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–ª–∞—Ç–µ–∂–µ–π

---

## üîç –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –†–°–û –°–∞—Ö–∞–ª–∏–Ω–∞

### –ù–∞–π–¥–µ–Ω–æ:

**–î–≠–ö (–≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ):**
- –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç: https://lk.sakhalinenergo.ru
- –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: "–î–≠–ö –°–∞—Ö–∞–ª–∏–Ω—ç–Ω–µ—Ä–≥–æ—Å–±—ã—Ç"
- –ü—É–±–ª–∏—á–Ω—ã–π API: **–Ω–µ –Ω–∞–π–¥–µ–Ω** (–Ω—É–∂–µ–Ω —Ä–µ–≤–µ—Ä—Å-–∏–Ω–∂–∏–Ω–∏—Ä–∏–Ω–≥ –õ–ö)

**–†–í–ö-–°–∞—Ö–∞–ª–∏–Ω (–í–æ–¥–æ–∫–∞–Ω–∞–ª):**
- –°–∞–π—Ç: https://rosvodokanal.ru
- –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç: –µ—Å—Ç—å
- –ü—É–±–ª–∏—á–Ω—ã–π API: **–Ω–µ –Ω–∞–π–¥–µ–Ω** (–Ω—É–∂–µ–Ω –ø–∞—Ä—Å–∏–Ω–≥)

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **reverse engineering** –ª–∏—á–Ω—ã—Ö –∫–∞–±–∏–Ω–µ—Ç–æ–≤ –†–°–û –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–µ–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã—Ö API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤.

---

## üì¶ –§–∞–π–ª—ã —Å–æ–∑–¥–∞–Ω—ã/–∏–∑–º–µ–Ω–µ–Ω—ã

### –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:
- `bot/services/dadata_service.py`
- `bot/services/dadata_examples.py`
- `bot/services/gis_api_service.py`
- `bot/services/gis_parser_service.py`
- `bot/services/yoomoney_service.py`
- `migrations/versions/add_payment_details_rso.py`
- `RSO_INTEGRATION_GUIDE.md`
- `GIS_API_INTEGRATION.md`
- `PAYMENT_INTEGRATION.md`

### –ò–∑–º–µ–Ω–µ–Ω—ã:
- `bot/config.py` (Ollama, DaData)
- `bot/services/address_service.py` (DaData –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)
- `bot/services/billing_service.py` (Ollama OCR)
- `requirements.txt` (beautifulsoup4, lxml)
- `SESSION_CONTEXT.md`

---

## üí° –ö–ª—é—á–µ–≤—ã–µ –∏–Ω—Å–∞–π—Ç—ã

1. **OCR —Ä–∞–±–æ—Ç–∞–µ—Ç:** Ollama llama3.2-vision —É—Å–ø–µ—à–Ω–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç —á–µ–∫–∏
2. **DaData —Ä–µ—à–∞–µ—Ç 80% –∑–∞–¥–∞—á** –ø–æ –∞–¥—Ä–µ—Å–∞–º –∏ –£–ö
3. **–ì–ò–° –ñ–ö–• –∏–º–µ–µ—Ç API**, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
4. **–†–°–û –∏–º–µ—é—Ç –ª–∏—á–Ω—ã–µ –∫–∞–±–∏–Ω–µ—Ç—ã**, –Ω–æ –Ω–µ –≤—Å–µ - –ø—É–±–ª–∏—á–Ω—ã–µ API
5. **–ÆMoney - –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–±** –ø—Ä–∏–µ–º–∞ –ø–ª–∞—Ç–µ–∂–µ–π –±–µ–∑ —ç–∫–≤–∞–π—Ä–∏–Ω–≥–∞

---

## üéØ –í–∞—Ä–∏–∞–Ω—Ç—ã —Ä–∞–∑–≤–∏—Ç–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (1-2 –Ω–µ–¥–µ–ª–∏)
- DaData –¥–ª—è –∞–¥—Ä–µ—Å–æ–≤
- –ñ–∏–ª—å—Ü—ã –≤–≤–æ–¥—è—Ç –ª–∏—Ü–µ–≤—ã–µ —Å—á–µ—Ç–∞
- –ê–¥–º–∏–Ω –≤—Ä—É—á–Ω—É—é —Å–æ–∑–¥–∞–µ—Ç –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è
- –ÆMoney –¥–ª—è –æ–ø–ª–∞—Ç—ã

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–∞—Å—Ç–∏—á–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è (1-2 –º–µ—Å—è—Ü–∞)
- DaData + –ø–∞—Ä—Å–∏–Ω–≥ –ª–∏—á–Ω—ã—Ö –∫–∞–±–∏–Ω–µ—Ç–æ–≤ –†–°–û
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π
- –ÆMoney + webhook

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ü–æ–ª–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è (3-6 –º–µ—Å—è—Ü–µ–≤)
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ –ì–ò–° –ñ–ö–•
- SOAP API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
- –†–µ–∫—É—Ä—Ä–µ–Ω—Ç–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏

---

**–î–∞—Ç–∞:** 2026-01-10  
**–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã:** ~3 —á–∞—Å–∞  
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é (MVP) / –¢—Ä–µ–±—É–µ—Ç—Å—è –≤—ã–±–æ—Ä –≤–∞—Ä–∏–∞–Ω—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
